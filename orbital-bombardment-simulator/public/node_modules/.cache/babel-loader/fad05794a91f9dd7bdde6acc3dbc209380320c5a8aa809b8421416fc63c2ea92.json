{"ast":null,"code":"import * as PIXI from 'pixi.js';\nimport { PLANET_RENDERER_CONFIGS } from './rendererModels';\nimport { SHIPS } from '../simulation/simulationModels';\nimport { ObjectPool } from './utils';\n\n// Define the asset paths\nconst ASSET_PATHS = {\n  BACKGROUND: '/assets/game_background.png',\n  SHIPS: {\n    [SHIPS.SMALL.id]: '/assets/small_ship.png',\n    [SHIPS.MEDIUM.id]: '/assets/medium_ship.png',\n    [SHIPS.LARGE.id]: '/assets/big_ship.png'\n  },\n  PLANETS: {\n    MERCURY: '/assets/planets/mercury.png',\n    VENUS: '/assets/planets/venus.png',\n    EARTH: '/assets/planets/earth.png',\n    MARS: '/assets/planets/mars.png',\n    JUPITER: '/assets/planets/jupiter.png'\n  }\n};\nclass ShipRenderer {\n  constructor(ship) {\n    try {\n      if (!ship || !ship.type || !ship.type.id) {\n        console.error('Invalid ship object:', ship);\n        throw new Error('Invalid ship object');\n      }\n      this.textures = {\n        [SHIPS.SMALL.id]: PIXI.Texture.from(ASSET_PATHS.SHIPS[SHIPS.SMALL.id]),\n        [SHIPS.MEDIUM.id]: PIXI.Texture.from(ASSET_PATHS.SHIPS[SHIPS.MEDIUM.id]),\n        [SHIPS.LARGE.id]: PIXI.Texture.from(ASSET_PATHS.SHIPS[SHIPS.LARGE.id])\n      };\n      if (!this.textures[ship.type.id]) {\n        console.error('Invalid ship type:', ship.type.id);\n        throw new Error('Invalid ship type');\n      }\n      this.sprite = new PIXI.Sprite(this.textures[ship.type.id]);\n      this.sprite.anchor.set(0.5);\n      this.updateSprite(ship);\n    } catch (error) {\n      console.error('Error in ShipRenderer constructor:', error);\n      throw error;\n    }\n  }\n  updateSprite(ship) {\n    try {\n      if (!ship || !ship.type) return;\n      this.sprite.texture = this.textures[ship.type.id];\n      switch (ship.type.id) {\n        case SHIPS.SMALL.id:\n          this.sprite.scale.set(0.25);\n          break;\n        case SHIPS.MEDIUM.id:\n          this.sprite.scale.set(0.3);\n          break;\n        case SHIPS.LARGE.id:\n          this.sprite.scale.set(0.37);\n          break;\n        default:\n          console.warn(`Unexpected ship type: ${ship.type.id}`);\n          this.sprite.scale.set(0.5);\n      }\n    } catch (error) {\n      console.error('Error in updateSprite:', error);\n    }\n  }\n  render(ship) {\n    try {\n      this.sprite.x = ship.x;\n      this.sprite.y = ship.y;\n      this.sprite.rotation = ship.angle + Math.PI / 2;\n    } catch (error) {\n      console.error('Error in ShipRenderer render:', error);\n    }\n  }\n}\nclass BulletRenderer {\n  constructor(bullet) {\n    this.sprite = new PIXI.Graphics();\n    this.updateSprite(bullet);\n  }\n  updateSprite(bullet) {\n    this.sprite.clear();\n    this.sprite.beginFill(0xFFFF00);\n    this.sprite.drawCircle(0, 0, 2);\n    this.sprite.endFill();\n  }\n  render(bullet) {\n    this.sprite.x = bullet.x;\n    this.sprite.y = bullet.y;\n  }\n}\nclass PlanetRenderer {\n  constructor(planet, x, y) {\n    this.planet = planet;\n    this.x = x;\n    this.y = y;\n    this.rotation = 0;\n    this.planetSprite = new PIXI.Sprite(PIXI.Texture.from(ASSET_PATHS.PLANETS[planet.id.toUpperCase()]));\n    this.planetSprite.anchor.set(0.5);\n    this.planetSprite.x = x;\n    this.planetSprite.y = y;\n    const renderType = PLANET_RENDERER_CONFIGS[this.planet.id.toUpperCase()];\n    const scaleFactor = (renderType.maxRadius + renderType.minRadius) / (2 * this.planetSprite.width);\n    this.planetSprite.scale.set(scaleFactor);\n    this.healthBarSprite = new PIXI.Graphics();\n    this.healthBarSprite.x = x - 50;\n    this.healthBarSprite.y = y + 60;\n    this.nameText = new PIXI.Text(planet.name, {\n      fontFamily: \"'Exo', sans-serif\",\n      fontSize: 18,\n      fill: 0xFFFFFF,\n      align: 'center'\n    });\n    this.nameText.anchor.set(0.5);\n    this.nameText.x = x;\n    this.nameText.y = y - 70;\n  }\n  updateSprite() {\n    // This method is no longer needed for sprite-based planets, but we'll keep it for compatibility\n  }\n  render(health) {\n    this.planetSprite.rotation = this.rotation;\n    this.healthBarSprite.clear();\n    this.healthBarSprite.beginFill(0x00FF00);\n    this.healthBarSprite.drawRect(0, 0, health / this.planet.maxHealth * 100, 10);\n    this.healthBarSprite.endFill();\n    this.nameText.text = this.planet.name;\n  }\n  updateRotation(deltaTime) {\n    const renderType = PLANET_RENDERER_CONFIGS[this.planet.id.toUpperCase()];\n    this.rotation += renderType.rotationSpeed * deltaTime;\n  }\n}\nexport class GameRenderer {\n  constructor(container, width, height, initialPlanet) {\n    try {\n      this.width = width;\n      this.height = height;\n      this.app = new PIXI.Application({\n        width,\n        height,\n        backgroundColor: 0x000000\n      });\n      container.appendChild(this.app.view);\n\n      // Load background\n      this.background = PIXI.Sprite.from(ASSET_PATHS.BACKGROUND);\n      this.background.width = width;\n      this.background.height = height;\n      this.app.stage.addChild(this.background);\n      this.shipRenderers = new Map();\n      this.bulletRenderers = new Map();\n      this.planetRenderer = new PlanetRenderer(initialPlanet, width / 2, height / 2);\n      this.app.stage.addChild(this.planetRenderer.planetSprite);\n      this.app.stage.addChild(this.planetRenderer.healthBarSprite);\n      this.app.stage.addChild(this.planetRenderer.nameText);\n      this.shipPool = new ObjectPool(() => new ShipRenderer({\n        type: {\n          id: SHIPS.SMALL.id\n        }\n      }));\n      this.bulletPool = new ObjectPool(() => new BulletRenderer({}));\n      this.planetPool = new ObjectPool(() => new PlanetRenderer({}, width / 2, height / 2));\n      this.lastUpdateTime = Date.now();\n\n      // Preload all textures\n      this.preloadTextures();\n    } catch (error) {\n      console.error('Error in GameRenderer constructor:', error);\n    }\n  }\n  preloadTextures() {\n    Object.values(ASSET_PATHS.SHIPS).forEach(path => {\n      PIXI.Texture.from(path);\n    });\n    Object.values(ASSET_PATHS.PLANETS).forEach(path => {\n      PIXI.Texture.from(path);\n    });\n  }\n  getShipRenderer(ship) {\n    try {\n      if (!this.shipRenderers.has(ship)) {\n        console.log('Creating new ShipRenderer for ship:', ship);\n        const renderer = this.shipPool.get();\n        renderer.updateSprite(ship);\n        this.app.stage.addChild(renderer.sprite);\n        this.shipRenderers.set(ship, renderer);\n      }\n      return this.shipRenderers.get(ship);\n    } catch (error) {\n      console.error('Error in getShipRenderer:', error);\n      console.error('Ship object:', ship);\n      throw error;\n    }\n  }\n  getBulletRenderer(bullet) {\n    if (!this.bulletRenderers.has(bullet)) {\n      const renderer = this.bulletPool.get();\n      renderer.updateSprite(bullet);\n      this.app.stage.addChild(renderer.sprite);\n      this.bulletRenderers.set(bullet, renderer);\n    }\n    return this.bulletRenderers.get(bullet);\n  }\n  getPlanetRenderer(planet) {\n    if (this.planetRenderer.planet !== planet) {\n      this.app.stage.removeChild(this.planetRenderer.planetSprite);\n      this.app.stage.removeChild(this.planetRenderer.healthBarSprite);\n      this.app.stage.removeChild(this.planetRenderer.nameText);\n      this.planetPool.release(this.planetRenderer);\n      this.planetRenderer = new PlanetRenderer(planet, this.width / 2, this.height / 2);\n      this.app.stage.addChild(this.planetRenderer.planetSprite);\n      this.app.stage.addChild(this.planetRenderer.healthBarSprite);\n      this.app.stage.addChild(this.planetRenderer.nameText);\n    }\n    return this.planetRenderer;\n  }\n  removeShipRenderer(ship) {\n    const renderer = this.shipRenderers.get(ship);\n    if (renderer) {\n      this.app.stage.removeChild(renderer.sprite);\n      this.shipPool.release(renderer);\n      this.shipRenderers.delete(ship);\n    }\n  }\n  removeBulletRenderer(bullet) {\n    const renderer = this.bulletRenderers.get(bullet);\n    if (renderer) {\n      this.app.stage.removeChild(renderer.sprite);\n      this.bulletPool.release(renderer);\n      this.bulletRenderers.delete(bullet);\n    }\n  }\n  updatePlanetRotation() {\n    const currentTime = Date.now();\n    const deltaTime = (currentTime - this.lastUpdateTime) / 1000;\n    this.planetRenderer.updateRotation(deltaTime);\n    this.lastUpdateTime = currentTime;\n  }\n  render(simulation) {\n    try {\n      this.updatePlanetRotation();\n      simulation.ships.forEach(ship => {\n        try {\n          const renderer = this.getShipRenderer(ship);\n          renderer.render(ship);\n        } catch (error) {\n          console.error('Error rendering ship:', error);\n          console.error('Problematic ship:', ship);\n        }\n      });\n      this.shipRenderers.forEach((renderer, ship) => {\n        if (!simulation.ships.includes(ship)) {\n          this.removeShipRenderer(ship);\n        }\n      });\n      simulation.bullets.forEach(bullet => {\n        const renderer = this.getBulletRenderer(bullet);\n        renderer.render(bullet);\n      });\n      this.bulletRenderers.forEach((renderer, bullet) => {\n        if (!simulation.bullets.includes(bullet)) {\n          this.removeBulletRenderer(bullet);\n        }\n      });\n      const currentPlanet = simulation.getCurrentPlanet();\n      const planetRenderer = this.getPlanetRenderer(currentPlanet);\n      planetRenderer.render(simulation.getPlanetHealth());\n    } catch (error) {\n      console.error('Error in GameRenderer render:', error);\n    }\n  }\n  destroy() {\n    this.app.destroy(true);\n  }\n}","map":{"version":3,"names":["PIXI","PLANET_RENDERER_CONFIGS","SHIPS","ObjectPool","ASSET_PATHS","BACKGROUND","SMALL","id","MEDIUM","LARGE","PLANETS","MERCURY","VENUS","EARTH","MARS","JUPITER","ShipRenderer","constructor","ship","type","console","error","Error","textures","Texture","from","sprite","Sprite","anchor","set","updateSprite","texture","scale","warn","render","x","y","rotation","angle","Math","PI","BulletRenderer","bullet","Graphics","clear","beginFill","drawCircle","endFill","PlanetRenderer","planet","planetSprite","toUpperCase","renderType","scaleFactor","maxRadius","minRadius","width","healthBarSprite","nameText","Text","name","fontFamily","fontSize","fill","align","health","drawRect","maxHealth","text","updateRotation","deltaTime","rotationSpeed","GameRenderer","container","height","initialPlanet","app","Application","backgroundColor","appendChild","view","background","stage","addChild","shipRenderers","Map","bulletRenderers","planetRenderer","shipPool","bulletPool","planetPool","lastUpdateTime","Date","now","preloadTextures","Object","values","forEach","path","getShipRenderer","has","log","renderer","get","getBulletRenderer","getPlanetRenderer","removeChild","release","removeShipRenderer","delete","removeBulletRenderer","updatePlanetRotation","currentTime","simulation","ships","includes","bullets","currentPlanet","getCurrentPlanet","getPlanetHealth","destroy"],"sources":["/Users/kareenarachel/Documents/Github/orbital-bombardment-simulator/orbital-bombardment-simulator/src/render/renderer.js"],"sourcesContent":["import * as PIXI from 'pixi.js';\nimport { PLANET_RENDERER_CONFIGS } from './rendererModels';\nimport { SHIPS } from '../simulation/simulationModels';\nimport { ObjectPool } from './utils';\n\n// Define the asset paths\nconst ASSET_PATHS = {\n  BACKGROUND: '/assets/game_background.png',\n  SHIPS: {\n    [SHIPS.SMALL.id]: '/assets/small_ship.png',\n    [SHIPS.MEDIUM.id]: '/assets/medium_ship.png',\n    [SHIPS.LARGE.id]: '/assets/big_ship.png',\n  },\n  PLANETS: {\n    MERCURY: '/assets/planets/mercury.png',\n    VENUS: '/assets/planets/venus.png',\n    EARTH: '/assets/planets/earth.png',\n    MARS: '/assets/planets/mars.png',\n    JUPITER: '/assets/planets/jupiter.png',\n  }\n};\n\nclass ShipRenderer {\n  constructor(ship) {\n    try {\n      if (!ship || !ship.type || !ship.type.id) {\n        console.error('Invalid ship object:', ship);\n        throw new Error('Invalid ship object');\n      }\n\n      this.textures = {\n        [SHIPS.SMALL.id]: PIXI.Texture.from(ASSET_PATHS.SHIPS[SHIPS.SMALL.id]),\n        [SHIPS.MEDIUM.id]: PIXI.Texture.from(ASSET_PATHS.SHIPS[SHIPS.MEDIUM.id]),\n        [SHIPS.LARGE.id]: PIXI.Texture.from(ASSET_PATHS.SHIPS[SHIPS.LARGE.id]),\n      };\n\n      if (!this.textures[ship.type.id]) {\n        console.error('Invalid ship type:', ship.type.id);\n        throw new Error('Invalid ship type');\n      }\n\n      this.sprite = new PIXI.Sprite(this.textures[ship.type.id]);\n      this.sprite.anchor.set(0.5);\n      this.updateSprite(ship);\n    } catch (error) {\n      console.error('Error in ShipRenderer constructor:', error);\n      throw error;\n    }\n  }\n\n  updateSprite(ship) {\n    try {\n      if (!ship || !ship.type) return;\n      this.sprite.texture = this.textures[ship.type.id];\n\n      switch(ship.type.id) {\n        case SHIPS.SMALL.id:\n          this.sprite.scale.set(0.25);\n          break;\n        case SHIPS.MEDIUM.id:\n          this.sprite.scale.set(0.3);\n          break;\n        case SHIPS.LARGE.id:\n          this.sprite.scale.set(0.37);\n          break;\n        default:\n          console.warn(`Unexpected ship type: ${ship.type.id}`);\n          this.sprite.scale.set(0.5);\n      }\n    } catch (error) {\n      console.error('Error in updateSprite:', error);\n    }\n  }\n\n  render(ship) {\n    try {\n      this.sprite.x = ship.x;\n      this.sprite.y = ship.y;\n      this.sprite.rotation = ship.angle + Math.PI / 2;\n    } catch (error) {\n      console.error('Error in ShipRenderer render:', error);\n    }\n  }\n}\n\nclass BulletRenderer {\n  constructor(bullet) {\n    this.sprite = new PIXI.Graphics();\n    this.updateSprite(bullet);\n  }\n\n  updateSprite(bullet) {\n    this.sprite.clear();\n    this.sprite.beginFill(0xFFFF00);\n    this.sprite.drawCircle(0, 0, 2);\n    this.sprite.endFill();\n  }\n\n  render(bullet) {\n    this.sprite.x = bullet.x;\n    this.sprite.y = bullet.y;\n  }\n}\n\nclass PlanetRenderer {\n  constructor(planet, x, y) {\n    this.planet = planet;\n    this.x = x;\n    this.y = y;\n    this.rotation = 0;\n\n    this.planetSprite = new PIXI.Sprite(PIXI.Texture.from(ASSET_PATHS.PLANETS[planet.id.toUpperCase()]));\n    this.planetSprite.anchor.set(0.5);\n    this.planetSprite.x = x;\n    this.planetSprite.y = y;\n\n    const renderType = PLANET_RENDERER_CONFIGS[this.planet.id.toUpperCase()];\n    const scaleFactor = (renderType.maxRadius + renderType.minRadius) / (2 * this.planetSprite.width);\n    this.planetSprite.scale.set(scaleFactor);\n\n    this.healthBarSprite = new PIXI.Graphics();\n    this.healthBarSprite.x = x - 50;\n    this.healthBarSprite.y = y + 60;\n\n    this.nameText = new PIXI.Text(planet.name, {\n      fontFamily: \"'Exo', sans-serif\",\n      fontSize: 18,\n      fill: 0xFFFFFF,\n      align: 'center'\n    });\n    this.nameText.anchor.set(0.5);\n    this.nameText.x = x;\n    this.nameText.y = y - 70;\n  }\n\n  updateSprite() {\n    // This method is no longer needed for sprite-based planets, but we'll keep it for compatibility\n  }\n\n  render(health) {\n    this.planetSprite.rotation = this.rotation;\n\n    this.healthBarSprite.clear();\n    this.healthBarSprite.beginFill(0x00FF00);\n    this.healthBarSprite.drawRect(0, 0, (health / this.planet.maxHealth) * 100, 10);\n    this.healthBarSprite.endFill();\n\n    this.nameText.text = this.planet.name;\n  }\n\n  updateRotation(deltaTime) {\n    const renderType = PLANET_RENDERER_CONFIGS[this.planet.id.toUpperCase()];\n    this.rotation += renderType.rotationSpeed * deltaTime;\n  }\n}\n\nexport class GameRenderer {\n  constructor(container, width, height, initialPlanet) {\n    try {\n      this.width = width;\n      this.height = height;\n      this.app = new PIXI.Application({\n        width,\n        height,\n        backgroundColor: 0x000000,\n      });\n      container.appendChild(this.app.view);\n\n      // Load background\n      this.background = PIXI.Sprite.from(ASSET_PATHS.BACKGROUND);\n      this.background.width = width;\n      this.background.height = height;\n      this.app.stage.addChild(this.background);\n\n      this.shipRenderers = new Map();\n      this.bulletRenderers = new Map();\n      this.planetRenderer = new PlanetRenderer(initialPlanet, width / 2, height / 2);\n\n      this.app.stage.addChild(this.planetRenderer.planetSprite);\n      this.app.stage.addChild(this.planetRenderer.healthBarSprite);\n      this.app.stage.addChild(this.planetRenderer.nameText);\n\n      this.shipPool = new ObjectPool(() => new ShipRenderer({type: {id: SHIPS.SMALL.id}}));\n      this.bulletPool = new ObjectPool(() => new BulletRenderer({}));\n      this.planetPool = new ObjectPool(() => new PlanetRenderer({}, width / 2, height / 2));\n\n      this.lastUpdateTime = Date.now();\n\n      // Preload all textures\n      this.preloadTextures();\n    } catch (error) {\n      console.error('Error in GameRenderer constructor:', error);\n    }\n  }\n\n  preloadTextures() {\n    Object.values(ASSET_PATHS.SHIPS).forEach(path => {\n      PIXI.Texture.from(path);\n    });\n    Object.values(ASSET_PATHS.PLANETS).forEach(path => {\n      PIXI.Texture.from(path);\n    });\n  }\n\n  getShipRenderer(ship) {\n    try {\n      if (!this.shipRenderers.has(ship)) {\n        console.log('Creating new ShipRenderer for ship:', ship);\n        const renderer = this.shipPool.get();\n        renderer.updateSprite(ship);\n        this.app.stage.addChild(renderer.sprite);\n        this.shipRenderers.set(ship, renderer);\n      }\n      return this.shipRenderers.get(ship);\n    } catch (error) {\n      console.error('Error in getShipRenderer:', error);\n      console.error('Ship object:', ship);\n      throw error;\n    }\n  }\n\n  getBulletRenderer(bullet) {\n    if (!this.bulletRenderers.has(bullet)) {\n      const renderer = this.bulletPool.get();\n      renderer.updateSprite(bullet);\n      this.app.stage.addChild(renderer.sprite);\n      this.bulletRenderers.set(bullet, renderer);\n    }\n    return this.bulletRenderers.get(bullet);\n  }\n\n  getPlanetRenderer(planet) {\n    if (this.planetRenderer.planet !== planet) {\n      this.app.stage.removeChild(this.planetRenderer.planetSprite);\n      this.app.stage.removeChild(this.planetRenderer.healthBarSprite);\n      this.app.stage.removeChild(this.planetRenderer.nameText);\n\n      this.planetPool.release(this.planetRenderer);\n      this.planetRenderer = new PlanetRenderer(planet, this.width / 2, this.height / 2);\n\n      this.app.stage.addChild(this.planetRenderer.planetSprite);\n      this.app.stage.addChild(this.planetRenderer.healthBarSprite);\n      this.app.stage.addChild(this.planetRenderer.nameText);\n    }\n    return this.planetRenderer;\n  }\n\n  removeShipRenderer(ship) {\n    const renderer = this.shipRenderers.get(ship);\n    if (renderer) {\n      this.app.stage.removeChild(renderer.sprite);\n      this.shipPool.release(renderer);\n      this.shipRenderers.delete(ship);\n    }\n  }\n\n  removeBulletRenderer(bullet) {\n    const renderer = this.bulletRenderers.get(bullet);\n    if (renderer) {\n      this.app.stage.removeChild(renderer.sprite);\n      this.bulletPool.release(renderer);\n      this.bulletRenderers.delete(bullet);\n    }\n  }\n\n  updatePlanetRotation() {\n    const currentTime = Date.now();\n    const deltaTime = (currentTime - this.lastUpdateTime) / 1000;\n    this.planetRenderer.updateRotation(deltaTime);\n    this.lastUpdateTime = currentTime;\n  }\n\n  render(simulation) {\n    try {\n      this.updatePlanetRotation();\n\n      simulation.ships.forEach(ship => {\n        try {\n          const renderer = this.getShipRenderer(ship);\n          renderer.render(ship);\n        } catch (error) {\n          console.error('Error rendering ship:', error);\n          console.error('Problematic ship:', ship);\n        }\n      });\n\n      this.shipRenderers.forEach((renderer, ship) => {\n        if (!simulation.ships.includes(ship)) {\n          this.removeShipRenderer(ship);\n        }\n      });\n\n      simulation.bullets.forEach(bullet => {\n        const renderer = this.getBulletRenderer(bullet);\n        renderer.render(bullet);\n      });\n\n      this.bulletRenderers.forEach((renderer, bullet) => {\n        if (!simulation.bullets.includes(bullet)) {\n          this.removeBulletRenderer(bullet);\n        }\n      });\n\n      const currentPlanet = simulation.getCurrentPlanet();\n      const planetRenderer = this.getPlanetRenderer(currentPlanet);\n      planetRenderer.render(simulation.getPlanetHealth());\n    } catch (error) {\n      console.error('Error in GameRenderer render:', error);\n    }\n  }\n\n  destroy() {\n    this.app.destroy(true);\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}